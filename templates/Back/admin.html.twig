<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    {% block stylesheet %}
        <link rel="stylesheet" href="{{ asset('css/bootstrap.css') }}">
        <link href="https://fonts.googleapis.com/css?family=Assistant:200,300,400,600,700,800|Playfair+Display:400,700" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.18/fh-3.1.4/r-2.2.2/datatables.min.css"/>
        <link href="{{ asset('/css/style/style.css') }}" rel="stylesheet" />
        <link href="{{ asset('/css/style/admin/admin.css') }}" rel="stylesheet" />
        <link href="{{ asset('/css/style/menu.css') }}" rel="stylesheet" />
        <link href="{{ asset('fonts/font-awesome.css') }}" rel="stylesheet" />
    {% endblock %}
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Si icone -->
    {#<link rel="icon" type="image/ico" href="/images/ico-livre.ico" />#}
    <!--[if IE]><link rel="shortcut icon" type="image/x-icon" href="images/velo-marqueur.png" /><!-->

    {% block meta %}
        <!-- Création des metatags réseaux sociaux -->
        <!-- Metatags FB -->
        <meta property="og:title" content="Gestion clients MySPA" />
        <meta property="og:type" content="Gestion clients MySPA" />
        <meta property="og:url" content="crmmyspa.mclwebservices.com" />
        <meta property="og:description" content="Gestion clients MySPA" />
        <meta property="og:image" content="/css/images/" />

        <!-- Metatag Twitter -->
        <meta name="twitter:card" content="Gestion clients MySPA" />
        <meta name="twitter:tittle" content="Gestion clients MySPA" />
        <meta name="twitter:description" content="Gestion clients MySPA" />
    {% endblock %}
    <title>
        {% block title %}

        {% endblock %}
    </title>

    {% block stylesheets %}
    {% endblock %}
</head>

<body>

{% block body %}
<div class="container">
    <div class="menu-container">
        <div class="burger">
            <span class="line-1"></span>
            <span class="line-2"></span>
            <span class="line-3"></span>
        </div>
        <ul class="menu-content">
<<<<<<< HEAD
            <li class="active"><span class="icon-menu"><i class="fa fa-home"></i> </span>Accueil<span class="arrow"><i class="fa fa-chevron-right"></i> </span></li>
            <li><span class="icon-menu"><i class="fa fa-map"></i> </span>Carte de France<span class="arrow"><i class="fa fa-chevron-right"></i> </span></li>
=======
            <li class="active"><span class="icon-menu"><i class="fa fa-home"></i> </span>menu_1<span class="arrow"><i class="fa fa-chevron-right"></i> </span></li>
            <li ><span class="icon-menu"><i class="fa fa-shopping-bag"></i> </span><a href="{{ path('showAllShops') }}"> Magasin</a><span class="arrow"><i class="fa fa-chevron-right"></i> </span></li>
>>>>>>> develop
            <li>menu_3<span class="arrow"><i class="fa fa-chevron-right"></i> </span></li>
            <ul class="sub-menu">
                <li>sub-1</li>
                <li>sub-2</li>
                <li>sub-3</li>
            </ul>
            <li>menu_4<span class="arrow"><i class="fa fa-chevron-right"></i> </span></li>
            <li>menu_5<span class="arrow"><i class="fa fa-chevron-right"></i> </span></li>
            <li>menu_6<span class="arrow"><i class="fa fa-chevron-right"></i> </span></li>
        </ul>
    </div>
    {% block container %}
    <div class="row content">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <h2>Admin</h2>
                    <p>1/ Nombre de clients par département</p>
                    <p>2/ Le CA total par département</p>
                    {% for shop in shops %}
                        {% for dept in shop.region.departements %}
                            {{ dept.departement }}
                            {% endfor %}
                    {% endfor %}
                </div>
            </div>
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div id="container-charts"></div>
                    <div id="container-charts-prospect"></div>
                </div>
            </div>
        </div>
    </div>
    {% endblock %}
</div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('js/jquery.js') }}"></script>
    <script src="{{ asset('js/bootstrap.js') }}"></script>
    <script src="{{ asset('js/active-menu.js') }}"></script>
    <script src='https://cloud.tinymce.com/stable/tinymce.min.js'></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
{% endblock %}

{% block charts %}
    <script type="text/javascript">
        $(function () {
            var myChart = Highcharts.chart('container-charts', {
                chart: {
                    type: 'column',
                    plotBackgroundColor: null,
                    plotBorderWidth: 0,
                    plotShadow: false
                },
                title: {
                    text: 'Répartition <br>des clients<br>par region',
                    align: 'center',
                    verticalAlign: 'middle',
                    y: 40
                },
                // tooltip: {
                //     pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                // },
                xAxis: {
                    categories: [{%  if shops is defined %}{% for key, shop in shops %} '{{ key }}', {% endfor %}{% endif %}]
                },
                series: [{
                    data: [
                        {%  if shops is defined %}
                            {% for details in shops %}
                        {% for detail in details %}
                        {% for dept in detail.region.departements %}
                        {{ dept.departement }}
                            {% endfor %}
                            {% endfor %}
                            {% endfor %}
                        {% endif %}
                    ],
                    showInLegend: false
                }]
            });
        });
    </script>
    <script type="text/javascript">
        $(function () {
            var myChart = Highcharts.chart('container-charts-prospect', {
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: 0,
                    plotShadow: false
                },
                title: {
                    text: 'Répartition <br>des clients<br>par type',
                    align: 'left',
                    verticalAlign: 'top',
                    y: 40
                },
                xAxis: {
                    categories: [{%  if shops is defined %}{% for key, shop in shops %} '{{ key }}', {% endfor %}{% endif %}]
                },
                series: [{
                    type: 'column',
                    colorByPoint: true,
                    // name: 'Browser share',
                    // innerSize: '50%',

                    data: [
                        {%  if shops is defined %}
                        {#{% for shop in shops %}#}
                        {#['{{  shop.prospect }}', {% if shop.prospect == 1 %}0{% else %}1{% endif %}], //On affiche les clients#}
                        {#['{{ shop.prospect }}',{{ shop.prospect| length }}],#}{# //On affiche les prospects#}
                        {#{% endfor %}#}
                        {% endif %}
                    ],
                    showInLegend: false
                }]
            });
        });
    </script>
{% endblock %}
</body>

</html>